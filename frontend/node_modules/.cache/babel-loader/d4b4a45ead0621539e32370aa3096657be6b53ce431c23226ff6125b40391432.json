{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-06901e73\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"RECORDUM\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  style: {\n    \"margin\": \"30px 0 10px\"\n  }\n}, \"Регистрация\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  style: {\n    \"margin-bottom\": \"10px\"\n  }\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"margin-bottom\": \"30px\"\n  }\n}, \"Зарегистрируйтесь, чтобы стать сотрудником компании.\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"input-row\"\n};\nconst _hoisted_6 = {\n  class: \"input-row\"\n};\nconst _hoisted_7 = {\n  class: \"input-row\"\n};\nconst _hoisted_8 = {\n  style: {\n    \"text-align\": \"center\",\n    \"margin-top\": \"40px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppInput = _resolveComponent(\"AppInput\");\n  const _component_InputRows = _resolveComponent(\"InputRows\");\n  const _component_AppPrimaryBtn = _resolveComponent(\"AppPrimaryBtn\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_AppForm = _resolveComponent(\"AppForm\");\n  const _component_TheCard = _resolveComponent(\"TheCard\");\n  return _openBlock(), _createBlock(_component_TheCard, {\n    \"image-name\": \"reg_form_img.png\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_AppForm, {\n      onSubmit: $setup.submitForm\n    }, {\n      default: _withCtx(() => [_hoisted_1, _hoisted_2, _createElementVNode(\"p\", _hoisted_3, [_createTextVNode(\"Вы были приглашены компанией \"), _createElementVNode(\"strong\", null, _toDisplayString($setup.company.name), 1 /* TEXT */), _createTextVNode(\".\")]), _hoisted_4, _createVNode(_component_InputRows, null, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_AppInput, {\n          modelValue: $setup.form.name,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.name = $event),\n          type: `text`,\n          name: `name`,\n          rules: `required|max:35`,\n          placeholder: `Имя`\n        }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_AppInput, {\n          modelValue: $setup.form.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event),\n          type: `password`,\n          name: `password`,\n          rules: `required|min:6`,\n          placeholder: `Пароль`\n        }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_AppInput, {\n          modelValue: $setup.form.password_confirm,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.password_confirm = $event),\n          type: `password`,\n          name: `password_confirm`,\n          rules: `required|confirmed:@password`,\n          placeholder: `Потверждение пароля`\n        }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_AppPrimaryBtn, {\n        style: {\n          \"margin-top\": \"30px\"\n        },\n        type: \"submit\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" Зарегистрироваться \")]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"p\", _hoisted_8, [_createTextVNode(\"Уже есть аккаунт? \"), _createVNode(_component_router_link, {\n        class: \"colored-link\",\n        to: \"/login\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Войдите\")]),\n        _: 1 /* STABLE */\n      })])]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onSubmit\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createElementVNode","style","class","_createBlock","_component_TheCard","_createVNode","_component_AppForm","onSubmit","$setup","submitForm","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","company","name","_hoisted_4","_component_InputRows","_hoisted_5","_component_AppInput","form","$event","type","rules","placeholder","_hoisted_6","password","_hoisted_7","password_confirm","_component_AppPrimaryBtn","_hoisted_8","_component_router_link","to"],"sources":["C:\\Users\\SAK\\Desktop\\Обмен услуг\\frontend\\src\\pages\\auth\\EmployeeRegisterPage.vue"],"sourcesContent":["<template>\n  <TheCard image-name=\"reg_form_img.png\">\n    <AppForm @submit=\"submitForm\">\n      <h3>RECORDUM</h3>\n      <h1 style=\"margin: 30px 0 10px;\">Регистрация</h1>\n      <p style=\"margin-bottom: 10px;\">Вы были приглашены компанией <strong>{{ company.name }}</strong>.</p>\n      <p style=\"margin-bottom: 30px;\">Зарегистрируйтесь, чтобы стать сотрудником компании.</p>\n\n      <InputRows>\n        <div class=\"input-row\">\n          <AppInput v-model=\"form.name\"\n                    :type=\"`text`\"\n                    :name=\"`name`\"\n                    :rules=\"`required|max:35`\"\n                    :placeholder=\"`Имя`\">\n          </AppInput>\n        </div>\n\n        <div class=\"input-row\">\n          <AppInput v-model=\"form.password\"\n                    :type=\"`password`\"\n                    :name=\"`password`\"\n                    :rules=\"`required|min:6`\"\n                    :placeholder=\"`Пароль`\">\n          </AppInput>\n        </div>\n\n        <div class=\"input-row\">\n          <AppInput v-model=\"form.password_confirm\"\n                    :type=\"`password`\"\n                    :name=\"`password_confirm`\"\n                    :rules=\"`required|confirmed:@password`\"\n                    :placeholder=\"`Потверждение пароля`\">\n          </AppInput>\n        </div>\n\n      </InputRows>\n\n      <AppPrimaryBtn\n        style=\"margin-top: 30px;\"\n        type=\"submit\">\n        Зарегистрироваться\n      </AppPrimaryBtn>\n\n      <p style=\"text-align: center; margin-top: 40px;\">Уже есть аккаунт?\n        <router-link class=\"colored-link\" to=\"/login\">Войдите</router-link>\n      </p>\n    </AppForm>\n  </TheCard>\n\n</template>\n\n<script>\nimport AppInput from '@/components/UI/AppInput.vue'\nimport AppForm from '@/components/AppForm.vue'\nimport AppPrimaryBtn from '@/components/UI/AppPrimaryButton.vue'\nimport InputRows from '@/components/UI/InputRows.vue'\nimport TheCard from '@/components/TheCard.vue'\nimport { onMounted, ref } from 'vue'\nimport { checkHashApi, registerEmployeeApi } from '@/services/companies_service'\nimport router from '@/router/router'\nimport { loginApi } from '@/services/auth_service'\nimport { useRoute } from 'vue-router'\nimport store from '@/store'\n\nexport default {\n  components: { TheCard, InputRows, AppPrimaryBtn, AppForm, AppInput },\n  setup () {\n    const form = ref({\n      name: '',\n      password: ''\n    })\n\n    const route = useRoute()\n    const hash = route.query.hash\n    // const hash = getHashFromUrl(window.location.href)\n    const company = ref('')\n\n    onMounted(async () => {\n      if (store.getters['auth/getLoggedIn']) {\n        await router.push({ name: 'home' })\n      } else {\n        console.log(hash)\n        const payload = { hash }\n        console.log(payload)\n        try {\n          console.log('checkingHash')\n          const responseData = await checkHashApi(payload)\n          company.value = responseData.company\n          console.log(responseData)\n        } catch (err) {\n          console.log(err)\n          // await router.push({ name: 'login' })\n        }\n      }\n    })\n\n    const submitForm = async () => {\n      const payload = {\n        hash,\n        name: form.value.name,\n        password: form.value.password\n      }\n      try {\n        console.log(payload)\n        const responseData = await registerEmployeeApi(payload)\n        console.log(responseData)\n        const loginPayload = {\n          email: responseData.email,\n          password: form.value.password\n        }\n        await loginApi(loginPayload)\n        await router.push({ name: 'home' })\n      } catch (err) {\n        console.log(err)\n      }\n    }\n\n    return {\n      form,\n      submitForm,\n      company\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\np {\n  color: @non-active-color\n}\nstrong {\n  //color: black;\n}\nform {\n  width: 400px;\n}\n</style>\n"],"mappings":";;gEAGMA,mBAAA,CAAiB,YAAb,UAAQ;gEACZA,mBAAA,CAAiD;EAA7CC,KAA4B,EAA5B;IAAA;EAAA;AAA4B,GAAC,aAAW;;EACzCA,KAA4B,EAA5B;IAAA;EAAA;AAA4B;gEAC/BD,mBAAA,CAAwF;EAArFC,KAA4B,EAA5B;IAAA;EAAA;AAA4B,GAAC,sDAAoD;;EAG7EC,KAAK,EAAC;AAAW;;EASjBA,KAAK,EAAC;AAAW;;EASjBA,KAAK,EAAC;AAAW;;EAiBrBD,KAA6C,EAA7C;IAAA;IAAA;EAAA;AAA6C;;;;;;;;uBA3CpDE,YAAA,CA+CUC,kBAAA;IA/CD,YAAU,EAAC;EAAkB;sBACpC,MA6CU,CA7CVC,YAAA,CA6CUC,kBAAA;MA7CAC,QAAM,EAAEC,MAAA,CAAAC;IAAU;wBAC1B,MAAiB,CAAjBC,UAAiB,EACjBC,UAAiD,EACjDX,mBAAA,CAAqG,KAArGY,UAAqG,G,iBAArE,+BAA6B,GAAAZ,mBAAA,CAAmC,gBAAAa,gBAAA,CAAxBL,MAAA,CAAAM,OAAO,CAACC,IAAI,kB,iBAAY,GAAC,E,GACjGC,UAAwF,EAExFX,YAAA,CA4BYY,oBAAA;0BA3BV,MAOM,CAPNjB,mBAAA,CAOM,OAPNkB,UAOM,GANJb,YAAA,CAKWc,mBAAA;sBALQX,MAAA,CAAAY,IAAI,CAACL,IAAI;qEAATP,MAAA,CAAAY,IAAI,CAACL,IAAI,GAAAM,MAAA;UACjBC,IAAI,EAAE,MAAM;UACZP,IAAI,EAAE,MAAM;UACZQ,KAAK,EAAE,iBAAiB;UACxBC,WAAW,EAAE;mDAI1BxB,mBAAA,CAOM,OAPNyB,UAOM,GANJpB,YAAA,CAKWc,mBAAA;sBALQX,MAAA,CAAAY,IAAI,CAACM,QAAQ;qEAAblB,MAAA,CAAAY,IAAI,CAACM,QAAQ,GAAAL,MAAA;UACrBC,IAAI,EAAE,UAAU;UAChBP,IAAI,EAAE,UAAU;UAChBQ,KAAK,EAAE,gBAAgB;UACvBC,WAAW,EAAE;mDAI1BxB,mBAAA,CAOM,OAPN2B,UAOM,GANJtB,YAAA,CAKWc,mBAAA;sBALQX,MAAA,CAAAY,IAAI,CAACQ,gBAAgB;qEAArBpB,MAAA,CAAAY,IAAI,CAACQ,gBAAgB,GAAAP,MAAA;UAC7BC,IAAI,EAAE,UAAU;UAChBP,IAAI,EAAE,kBAAkB;UACxBQ,KAAK,EAAE,8BAA8B;UACrCC,WAAW,EAAE;;;UAM5BnB,YAAA,CAIgBwB,wBAAA;QAHd5B,KAAyB,EAAzB;UAAA;QAAA,CAAyB;QACzBqB,IAAI,EAAC;;0BAAS,MAEhB,C,iBAFgB,sBAEhB,E;;UAEAtB,mBAAA,CAEI,KAFJ8B,UAEI,G,iBAF6C,oBAC/C,GAAAzB,YAAA,CAAmE0B,sBAAA;QAAtD7B,KAAK,EAAC,cAAc;QAAC8B,EAAE,EAAC;;0BAAS,MAAO,C,iBAAP,SAAO,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}