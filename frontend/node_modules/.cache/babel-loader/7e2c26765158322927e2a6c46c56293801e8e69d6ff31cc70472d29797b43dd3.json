{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2ac0dbcc\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"icon pi pi-arrow-left\",\n  style: {\n    \"margin-right\": \"12px\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Назад в профиль\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"content-block\"\n};\nconst _hoisted_5 = {\n  class: \"content-block__right\"\n};\nconst _hoisted_6 = {\n  class: \"tab-content\"\n};\nconst _hoisted_7 = {\n  id: \"main-information\"\n};\nconst _hoisted_8 = {\n  class: \"form__inputs\"\n};\nconst _hoisted_9 = {\n  class: \"form__inputs__avatar\",\n  style: {\n    \"margin-right\": \"20px\"\n  }\n};\nconst _hoisted_10 = {\n  for: \"avatar\"\n};\nconst _hoisted_11 = {\n  class: \"input-row\"\n};\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = {\n  class: \"form__inputs\"\n};\nconst _hoisted_14 = {\n  class: \"input-row\"\n};\nconst _hoisted_15 = {\n  key: 1\n};\nconst _hoisted_16 = {\n  key: 2\n};\nconst _hoisted_17 = {\n  key: 3\n};\nconst _hoisted_18 = {\n  class: \"form__btns\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_AppVerticalTabs = _resolveComponent(\"AppVerticalTabs\");\n  const _component_InteractiveImage = _resolveComponent(\"InteractiveImage\");\n  const _component_AppInput = _resolveComponent(\"AppInput\");\n  const _component_InputRows = _resolveComponent(\"InputRows\");\n  const _component_AppForm = _resolveComponent(\"AppForm\");\n  const _component_AppPrimaryBtn = _resolveComponent(\"AppPrimaryBtn\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", null, [_createVNode(_component_router_link, {\n    to: \"/profile\"\n  }, {\n    default: _withCtx(() => [_hoisted_2, _hoisted_3]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"section\", _hoisted_4, [_createVNode(_component_AppVerticalTabs, {\n    names: $data.tabs,\n    selectedTab: $data.selectedTab,\n    onChangeTab: $options.changeTab\n  }, null, 8 /* PROPS */, [\"names\", \"selectedTab\", \"onChangeTab\"]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_AppForm, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"label\", _hoisted_10, [_createVNode(_component_InteractiveImage, {\n      src: $data.previewImage,\n      interactiveText: 'Загрузить фото',\n      class: \"avatar__image\"\n    }, null, 8 /* PROPS */, [\"src\"])]), _createElementVNode(\"input\", {\n      id: \"avatar\",\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: _cache[0] || (_cache[0] = (...args) => $options.uploadImage && $options.uploadImage(...args)),\n      style: {\n        \"display\": \"none\"\n      }\n    }, null, 32 /* HYDRATE_EVENTS */)]), _createVNode(_component_InputRows, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_AppInput, {\n        modelValue: $data.forms.mainInformation.texts.name,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.forms.mainInformation.texts.name = $event),\n        type: `text`,\n        name: `name`,\n        rules: `required|min:4`,\n        placeholder: `Имя`\n      }, null, 8 /* PROPS */, [\"modelValue\"])]), _createCommentVNode(\"                  <div class=\\\"input-row\\\">\"), _createCommentVNode(\"                    <AppInput v-model=\\\"form.texts.email\\\"\"), _createCommentVNode(\"                              :type=\\\"`text`\\\"\"), _createCommentVNode(\"                              :name=\\\"`email`\\\"\"), _createCommentVNode(\"                              :rules=\\\"`required|email`\\\"\"), _createCommentVNode(\"                              :placeholder=\\\"`Email`\\\">\"), _createCommentVNode(\"                    </AppInput>\"), _createCommentVNode(\"                  </div>\")]),\n      _: 1 /* STABLE */\n    })])]),\n\n    _: 1 /* STABLE */\n  })], 512 /* NEED_PATCH */), [[_vShow, $data.selectedTab.name === 'mainInformation']]), $data.selectedTab.name === 'aboutMe' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_AppForm, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_InputRows, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_14, [_createVNode(_component_AppInput, {\n        modelValue: $data.forms.aboutMe.texts.section,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.forms.aboutMe.texts.section = $event),\n        type: `text`,\n        name: `section`,\n        rules: `required|min:4`,\n        placeholder: `Название раздела`\n      }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n      _: 1 /* STABLE */\n    })])]),\n\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $data.selectedTab.name === 'url' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, \" Здесь должны были быть поля. \")) : _createCommentVNode(\"v-if\", true), $data.selectedTab.name === 'exp' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, \" Здесь должны были быть поля. \")) : _createCommentVNode(\"v-if\", true), $data.selectedTab.name === 'account' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, \" Здесь должны были быть поля. \")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_18, [_createVNode(_component_AppPrimaryBtn, {\n    onClick: $options.saveProfile,\n    disabled: !$options.profileIsChanged,\n    class: _normalizeClass({\n      disabled: !$options.profileIsChanged\n    })\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Отправить \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\", \"disabled\", \"class\"])])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","id","for","_createElementBlock","_hoisted_1","_createVNode","_component_router_link","to","_hoisted_2","_hoisted_3","_hoisted_4","_component_AppVerticalTabs","names","$data","tabs","selectedTab","onChangeTab","$options","changeTab","_hoisted_5","_hoisted_6","_hoisted_7","_component_AppForm","_hoisted_8","_hoisted_9","_hoisted_10","_component_InteractiveImage","src","previewImage","interactiveText","type","accept","onChange","_cache","args","uploadImage","_component_InputRows","_hoisted_11","_component_AppInput","forms","mainInformation","texts","name","$event","rules","placeholder","_createCommentVNode","_hoisted_12","_hoisted_13","_hoisted_14","aboutMe","section","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_component_AppPrimaryBtn","onClick","saveProfile","disabled","profileIsChanged","_normalizeClass"],"sources":["C:\\Users\\SAK\\Desktop\\Обмен услуг\\frontend\\src\\pages\\users\\EditProfilePageExtended.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <router-link to=\"/profile\">\n        <i class=\"icon pi pi-arrow-left\" style=\"margin-right: 12px;\"></i>\n        <span>Назад в профиль</span>\n      </router-link>\n    </header>\n\n    <section class=\"content-block\">\n      <AppVerticalTabs :names=\"tabs\"\n                       :selectedTab=\"selectedTab\"\n                       @changeTab=\"changeTab\">\n      </AppVerticalTabs>\n\n      <div class=\"content-block__right\">\n        <div class=\"tab-content\">\n\n          <div id=\"main-information\" v-show=\"selectedTab.name === 'mainInformation'\">\n            <AppForm>\n              <div class=\"form__inputs\">\n                <div class=\"form__inputs__avatar\" style=\"margin-right: 20px;\">\n                  <label for=\"avatar\">\n                    <InteractiveImage :src=\"previewImage\"\n                                      :interactiveText=\"'Загрузить фото'\"\n                                      class=\"avatar__image\" />\n                  </label>\n                  <input\n                    id=\"avatar\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    @change=uploadImage\n                    style=\"display: none\">\n                </div>\n\n                <InputRows>\n                  <div class=\"input-row\">\n                    <AppInput v-model=\"forms.mainInformation.texts.name\"\n                              :type=\"`text`\"\n                              :name=\"`name`\"\n                              :rules=\"`required|min:4`\"\n                              :placeholder=\"`Имя`\">\n                    </AppInput>\n                  </div>\n                  <!--                  <div class=\"input-row\">-->\n                  <!--                    <AppInput v-model=\"form.texts.email\"-->\n                  <!--                              :type=\"`text`\"-->\n                  <!--                              :name=\"`email`\"-->\n                  <!--                              :rules=\"`required|email`\"-->\n                  <!--                              :placeholder=\"`Email`\">-->\n                  <!--                    </AppInput>-->\n                  <!--                  </div>-->\n                </InputRows>\n              </div>\n            </AppForm>\n          </div>\n\n          <div v-if=\"selectedTab.name === 'aboutMe'\">\n            <AppForm>\n              <div class=\"form__inputs\">\n                <InputRows>\n                  <div class=\"input-row\">\n                    <AppInput v-model=\"forms.aboutMe.texts.section\"\n                              :type=\"`text`\"\n                              :name=\"`section`\"\n                              :rules=\"`required|min:4`\"\n                              :placeholder=\"`Название раздела`\">\n                    </AppInput>\n                  </div>\n                </InputRows>\n              </div>\n            </AppForm>\n          </div>\n\n          <div v-if=\"selectedTab.name === 'url'\">\n            Здесь должны были быть поля.\n          </div>\n\n          <div v-if=\"selectedTab.name === 'exp'\">\n            Здесь должны были быть поля.\n          </div>\n\n          <div v-if=\"selectedTab.name === 'account'\">\n            Здесь должны были быть поля.\n          </div>\n        </div>\n\n        <div class=\"form__btns\" style=\"margin-top: 20px;\">\n          <AppPrimaryBtn\n            @click=\"saveProfile\"\n            :disabled=\"!profileIsChanged\"\n            :class=\"{ disabled: !profileIsChanged }\"\n          >Отправить\n          </AppPrimaryBtn>\n        </div>\n      </div>\n\n    </section>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport AppImage from '@/components/UI/InteractiveImage.vue'\nimport { updateProfileMainInfoAvatarApi, updateProfileMainInfoTextsApi } from '@/services/users_service'\nimport store from '@/store'\nimport AppPrimaryBtn from '@/components/UI/AppPrimaryButton.vue'\nimport AppForm from '@/components/AppForm.vue'\nimport AppVerticalTabs from '@/components/UI/AppVerticalTabs.vue'\nimport AppInput from '@/components/UI/AppInput.vue'\nimport InputRows from '@/components/UI/InputRows.vue'\n\nconst formTextsAreDifferent = (form, defaultForm) => {\n  return Object.keys(form.texts).some(field => form.texts[field] !== defaultForm.texts[field])\n}\n\nexport default {\n  name: 'EditProfile',\n  components: { InputRows, AppInput, AppVerticalTabs, AppForm, AppPrimaryBtn, InteractiveImage: AppImage },\n  data () {\n    return {\n      tabs: [\n        { name: 'mainInformation', label: 'Основная информация' },\n        { name: 'aboutMe', label: 'Обо мне' },\n        { name: 'url', label: 'В интернете' },\n        { name: 'exp', label: 'Опыт работы' },\n        { name: 'account', label: 'Управление аккаунтом' }\n      ],\n      // selectedTab: this.tabs[0],\n      selectedTab: { name: 'mainInformation', label: 'Основная информация' },\n      forms: {\n        mainInformation: {\n          texts: {\n            name: store.getters['auth/getUserProfile'].name,\n            email: store.getters['auth/getUserProfile'].email\n          },\n          image: null\n        },\n        aboutMe: {\n          texts: {\n            section: 'Название раздела 1',\n            desc: 'Описание 1'\n          }\n        }\n      },\n      changesSubmitted: false,\n      previewImage: store.getters['auth/getUserProfile'].image\n    }\n  },\n  computed: {\n    ...mapGetters('auth', ['getUserProfile']),\n    defaultForms () {\n      return {\n        mainInformation: {\n          texts: {\n            name: store.getters['auth/getUserProfile'].name,\n            email: store.getters['auth/getUserProfile'].email\n          },\n          image: store.getters['auth/getUserProfile'].image\n        },\n        aboutMe: {\n          texts: {\n            section: 'Название раздела 1',\n            desc: 'Описание 1'\n          }\n        }\n      }\n    },\n    profileIsChanged () {\n      return this.mainInformationAvatarIsChanged || this.mainInformationTextAreChanged ||\n        this.aboutMeChanged\n    },\n    mainInformationAvatarIsChanged () {\n      return this.forms.mainInformation.image !== null\n    },\n    mainInformationTextAreChanged () {\n      return formTextsAreDifferent(this.forms.mainInformation, this.defaultForms.mainInformation)\n    },\n    aboutMeChanged () {\n      return formTextsAreDifferent(this.forms.aboutMe, this.defaultForms.aboutMe)\n    }\n  },\n  mounted () {\n  },\n  methods: {\n    saveProfile () {\n      if (this.mainInformationTextAreChanged) {\n        updateProfileMainInfoTextsApi(JSON.stringify(this.forms.mainInformation.texts))\n      }\n      if (this.mainInformationAvatarIsChanged) {\n        const formData = new FormData()\n        formData.append('picture', this.forms.mainInformation.image)\n        updateProfileMainInfoAvatarApi(formData)\n        this.forms.mainInformation.image = null\n      }\n      if (this.aboutMeChanged) {\n        console.log('Тут должна быть логика обновления AboutMe')\n      }\n    },\n    changeTab (tab) {\n      this.selectedTab = tab\n    },\n    uploadImage (e) {\n      const image = e.target.files[0]\n      const reader = new FileReader()\n      reader.readAsDataURL(image)\n      reader.onload = e => {\n        this.previewImage = e.target.result\n      }\n      this.forms.mainInformation.image = image\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.content-block {\n  width: 100%;\n  display: flex;\n  grid-template-columns: 450px 1fr;\n  margin-top: 50px;\n}\n\n.content-block__right{\n  width: 100%;\n}\n\n.tab-content {\n  padding: 40px;\n  width: 100%;\n  height: 400px;\n  border-radius: @border-radius;\n  background: white;\n  box-shadow: @box-shadow;\n}\n\n.avatar__image {\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n}\n\n.mainInformation {\n  padding: 40px;\n  width: 100%;\n  height: fit-content;\n  flex-shrink: 0;\n  border-radius: 20px;\n  background: white;\n  box-shadow: 1px 1px 37px 1px rgba(0, 0, 0, 0.08);\n}\n\n.input-rows {\n  width: 100%;\n\n  * {\n    width: 100%;\n  }\n\n  > * {\n    margin-top: 20px;\n  }\n}\n\n.input-row {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.line-input__field {\n  border: none;\n  outline: none;\n  border-bottom: 1px solid rgba(1, 1, 1, 0.20);\n}\n\n.form__inputs {\n  margin: 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.form__btns {\n  width: 100%;\n  display: flex;\n  justify-content: end;\n\n  button {\n    width: 200px;\n  }\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}